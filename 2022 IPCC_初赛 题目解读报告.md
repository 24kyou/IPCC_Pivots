# 2022 IPCC_åˆèµ› é¢˜ç›®è§£è¯»æŠ¥å‘Š

## 1.é¢˜ç›®æè¿°

![å›¾1]([IPCC_Pivots\img\å±å¹•æˆªå›¾ 2022-07-27 145531.png](https://github.com/24kyou/IPCC_Pivots/blob/main/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202022-07-27%20145531.png))

è¯¦è§PDF

## 2.åˆ†ææºç è®¡ç®—è¿‡ç¨‹

é€šè¿‡é˜…è¯»pivot.cçš„æºä»£ç ï¼Œä¸ºæ›´å¥½çš„ç†è§£é¢˜ç›®ï¼Œæˆ‘ä»¬å¯¹é¢˜ç›®çš„è®¡ç®—è¿‡ç¨‹è¿›è¡ŒæŠ½è±¡ï¼š

é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦æ˜ç¡®é¢˜ç›®çš„è¾“å…¥éƒ¨åˆ†ã€‚

è¾“å…¥éƒ¨åˆ†åŒ…å«æ•°æ®é›†S, ä»¥åŠæ‰€ç»™çš„ä¸‰ä¸ªå‚æ•°ï¼Œå…·ä½“å¦‚ä¸‹ã€‚

```c
//å‚æ•°	
	fscanf(file, "%d", &dim);//2 dim = dimention ç»´åº¦ï¼Œå‘ŠçŸ¥æ‰€ç»™çš„æ•°æ®é›†æ˜¯ä¸€ä¸ªäºŒç»´ç‚¹é›†
	fscanf(file, "%d", &n);//500 n=500 å‘ŠçŸ¥é¢˜ç›®æ‰€ç»™çš„æ•°æ®é›†Sæœ‰500ä¸ªç‚¹
	fscanf(file, "%d", &k);//2   k=2 å‘ŠçŸ¥é¢˜ç›®æ‰€éœ€çš„æ”¯æ’‘ç‚¹é›†åˆçš„å…ƒç´ ä¸º2
	printf("dim = %d, n = %d, k = %d\n", dim, n, k);
// Read Data
   	double* coord = (double*)malloc(sizeof(double) * dim * n);//500*2
    int i;
    for(i=0; i<n; i++){
        int j;
        for(j=0; j<dim; j++){
            fscanf(file, "%lf", &coord[i*dim + j]);	//è¯»å–æ‰€æœ‰çŸ©é˜µæ•°æ®ï¼Œå­˜æ”¾åœ¨coordè¿™ä¸ªæ•°ç»„ä¹‹ä¸­
        }
    }
/*ç‰¹åˆ«æ³¨æ˜ï¼šé¢˜ç›®çš„æ”¯æ’‘ç‚¹æ˜¯ä»æ‰€ç»™çš„æ•°æ®é›†Sä¸­ç©·ä¸¾è·å–çš„*/
```

å¯ä»¥å°†æ•´é“é¢˜çš„è®¡ç®—è¿‡ç¨‹åˆ†ä¸ºä¸€ä¸‹å‡ æ­¥ï¼š

**Step1:é€šè¿‡ç©·ä¸¾æ³•å°†æ•°æ®é›†Sä¸­çš„æ‰€æœ‰å¯èƒ½çš„æ”¯æ’‘ç‚¹é›†åˆï¼ˆpivotsï¼‰åˆ—å‡ºï¼Œæºç ä¸­å¯è§ï¼š**

```c
// temp : indexes of pivots with dummy array head
    int* temp = (int*)malloc(sizeof(int) * (k+1));//pivotsçŸ©é˜µåˆé›†
    temp[0] = -1;
/*tempçš„æ•°ç»„ä¹Ÿå³å‡½æ•°ä¸­çš„pivotsæ•°ç»„ï¼Œä»–å­˜å‚¨æ”¯æ’‘ç‚¹é›†åˆ(pivots)çš„æ”¯æ’‘ç‚¹ä¸‹æ ‡ï¼Œæ”¯æ’‘ç‚¹æ•°æ®æ¥æºäºcoordæ•°ç»„*/


void Combination(...,...,..,){
   if(ki==k-1){
        int i;
        for(i=pivots[ki-1]+1; i<n; i++){
            pivots[ki] = i;//æ­¤å¤„ä¸ºç¬¬äºŒä¸ªå¤§å¾ªç¯ï¼Œç¡®å®šç¬¬äºŒä¸ªæ”¯æ’‘ç‚¹pivot  1->499
			/*...*/
    }
    // Recursively call Combination() to combine pivots
    for(int i=pivots[ki-1]+1; i<n; i++) {
        pivots[ki] = i;//æ­¤å¤„æ˜¯ç¬¬ä¸€æ¬¡å¤§å¾ªç¯ï¼Œç¡®å®šç¬¬ä¸€ä¸ªæ”¯æ’‘ç‚¹åè¿›å…¥ä¹‹åçš„é€’å½’ pivotsé‡Œé¢æ‰€å«çš„æ˜¯ä¸‹æ ‡
        Combination(ki+1, k, n, dim, M, coord, pivots, maxDistanceSum, maxDisSumPivots, minDistanceSum, minDisSumPivots);
		/*....*/
    }
}
```

**Step2: å¯¹äºæ¯æ¬¡ç¡®å®šçš„æ”¯æ’‘ç‚¹é›†åˆï¼Œæˆ‘ä»¬éœ€è¦è®¡ç®—æ•°æ®é›†Sä¸­çš„æ¯ä¸ªç‚¹å»ºç«‹åŸºäºè¿™ä¸ªæ”¯æ’‘ç‚¹é›†åˆçš„è·ç¦»**

**å¯¹äºğ‘†ä¸­ä»»æ„çš„ä¸€ä¸ªæ•°æ®ç‚¹ğ‘¥ï¼Œå…¶åŸºäºæ”¯æ’‘ç‚¹é›†åˆé‡å»ºçš„åæ ‡æ˜¯å…¶åˆ°å„æ”¯æ’‘ç‚¹çš„è·ç¦»å½¢æˆçš„å‘é‡ï¼Œ **
$$
ğ‘¥^ğ‘ = (ğ‘‘(ğ‘¥, ğ‘1 ), â€¦ , ğ‘‘(ğ‘¥, ğ‘ğ‘˜ ))
$$
è€Œè¿™ä¸ªè®¡ç®—æ˜¯ç”±SumDistanceè¿™ä¸ªå‡½æ•°è¿›è¡Œçš„ï¼Œè®¡ç®—è¿‡ç¨‹å¦‚ä¸‹ï¼š

```c
// Rebuild coordinates. New coordinate of one point is its distance to each pivot.
    for(i=0; i<n; i++){
        int ki;
        for(ki=0; ki<k; ki++){	//è¿™ä¸ªforå¾ªç¯æ˜¯è®¡ç®—æ•°æ®é›†Sçš„ç‚¹åˆ°å„ä¸ªæ”¯æ’‘ç‚¹çš„è·ç¦»ã€‚
            double distance = 0;
            int pivoti = pivots[ki];	
            int j;
            for(j=0; j<dim; j++){
                distance += pow(coord[pivoti*dim + j] - coord[i*dim + j] ,2);// (x-y)^2
            }
            rebuiltCoord[i*k + ki] = sqrt(distance);//äºŒç»´çŸ©é˜µèµ‹å€¼ï¼Œå°†æ¯ä¸ªç‚¹çš„è·ç¦»ç»“æœæ”¾åœ¨è¿™ä¸ªæ•°ç»„é‡Œã€‚
        }
    }
```

**Step3: åŸºäºStep2çš„è·ç¦»æ•°ç»„ï¼Œæˆ‘ä»¬éœ€è¦æ±‚å‡ºæ¯ä¸ªç‚¹åˆ°è¾¾å…¶ä½™ç‚¹çš„åˆ‡æ¯”é›ªå¤«è·ç¦»ä¹‹å’Œ**

è®¡ç®—è¿‡ç¨‹å¦‚ä¸‹ï¼š

```c
// Calculate the sum of Chebyshev distance with rebuilt coordinates between every points
    double chebyshevSum = 0;
    for(i=0; i<n; i++){		//ä»0éå†æ•°æ®é›†ï¼Œç¡®å®šç¬¬ä¸€ä¸ªç‚¹
        int j;
        for(j=0; j<n; j++){	//ä»0éå†æ•°æ®é›†ï¼Œç¡®å®šç¬¬äºŒä¸ªç‚¹	//è®¡ç®—äºŒç‚¹ä¹‹é—´çš„åˆ‡æ¯”é›ªå¤«è·ç¦»
            double chebyshev = 0;
            int ki;
            for(ki=0; ki<k; ki++){
                double dis = fabs(rebuiltCoord[i*k + ki] - rebuiltCoord[j*k + ki]);
                chebyshev = dis>chebyshev ? dis : chebyshev;
            }
            chebyshevSum += chebyshev;
        }
    }
```

**Step4ï¼šå¯¹äºStep3è®¡ç®—å¾—åˆ°çš„åˆ‡æ¯”é›ªå¤«è·ç¦»æ•°æ®ï¼Œå¯¹ä»–è¿›è¡Œæ’åºï¼Œå¾—åˆ°ï¼š** 

å‰1000ä¸ª è¾ƒå¤§çš„åˆ‡æ¯”é›ªå¤«è·ç¦»ä¹‹å’Œ çš„æ”¯æ’‘ç‚¹ç‚¹é›†

å1000ä¸ªè¾ƒå°çš„åˆ‡æ¯”é›ªå¤«è·ç¦»ä¹‹å’Œ çš„æ”¯æ’‘ç‚¹ç‚¹é›†

æ’åºä»£ç å¦‚ä¸‹ï¼š

```c
			double distanceSum = SumDistance(k, n, dim, coord, pivots);
			//æ­¤å¤„å¾—åˆ°äº† åŸºäºä¸€ä¸ªç¡®å®šçš„æ”¯æ’‘ç‚¹é›†çš„åˆ‡æ¯”é›ªå¤«è·ç¦»ä¹‹å’Œ
// sort
            int a;
            for(a=M; a>0; a--){
                if(maxDistanceSum[a] > maxDistanceSum[a-1]){
                    double temp = maxDistanceSum[a];
                    maxDistanceSum[a] = maxDistanceSum[a-1];
                    maxDistanceSum[a-1] = temp;
                    int kj;
                    for(kj=0; kj<k; kj++){
                        int temp = maxDisSumPivots[a*k + kj];
                        maxDisSumPivots[a*k + kj] = maxDisSumPivots[(a-1)*k + kj];
                        maxDisSumPivots[(a-1)*k + kj] = temp;
                    }
                }
            }
            for(a=M; a>0; a--){
                if(minDistanceSum[a] < minDistanceSum[a-1]){
                    double temp = minDistanceSum[a];
                    minDistanceSum[a] = minDistanceSum[a-1];
                    minDistanceSum[a-1] = temp;
                    int kj;
                    for(kj=0; kj<k; kj++){
                        int temp = minDisSumPivots[a*k + kj];
                        minDisSumPivots[a*k + kj] = minDisSumPivots[(a-1)*k + kj];
                        minDisSumPivots[(a-1)*k + kj] = temp;
                    }
                }
            }
```

## 3.ä¼˜åŒ–æ€è·¯/ä¼˜åŒ–ç‚¹ï¼š

1. å¯¹äºStep1ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬æ˜¯é€šè¿‡ç©·ä¸¾æ³•å¯¹æ”¯æ’‘ç‚¹è¿›è¡Œæ’åˆ—ç»„åˆçš„ã€‚

   ä¹Ÿå³ï¼š(0,1) (0,2)...(0,499) (1,2),(1,3)(1,4)...(1,499)(2,3)(2,4).....(498,499)

   å¯¹äºè¿™éƒ¨åˆ†ï¼Œå› ä¸ºæ¯ä¸ªæ”¯æ’‘ç‚¹æ‰€å¸¦æ¥çš„åˆ‡æ¯”é›ªå¤«è·ç¦»çš„è®¡ç®—è¿‡ç¨‹æ²¡æœ‰æ•°æ®ä¾èµ–ï¼Œæ‰€ä»¥å¯ä»¥å°è¯•é€šè¿‡å¹¶è¡Œè®¡ç®—çš„æ–¹æ³•å¯¹è¿™ä¸ªå¤§å¾ªç¯è¿›è¡Œä¼˜åŒ–

2. Step2çš„å†…éƒ¨çš„forå¾ªç¯ä¹Ÿå¯ä»¥å°è¯•è¿›è¡Œå¹¶è¡Œè®¡ç®—ä¼˜åŒ–

3. Step3ä¸­çš„è®¡ç®—æ˜¯æ¯ä¸ªç‚¹åˆ°å…¶ä½™ç‚¹çš„åˆ‡æ¯”é›ªå¤«è·ç¦»ä¹‹å’Œçš„è®¡ç®—ï¼Œå…¶ä¸­å­˜åœ¨ç€é‡å¤æ•°æ®

   ä¸¾ä¸ªä¾‹å­ï¼Œè¿™ä¸ªåˆ‡æ¯”é›ªå¤«è·ç¦»ä¹‹å’ŒåŒ…å«äº†ï¼šï¼ˆx1,x4ï¼‰(x4,x1) çš„åˆ‡æ¯”é›ªå¤«è·ç¦»ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦è®¡ç®—è¯¥çŸ©é˜µçš„ä¸Šä¸‰è§’éƒ¨åˆ†ï¼Œå°†ç»“æœä¹˜ä»¥äºŒå³å¯ã€‚

   åŒæ—¶ï¼Œæ­¤å¤„çš„è·ç¦»è®¡ç®—ä¹Ÿå¯ä»¥å°è¯•è¿›è¡Œå¹¶è¡Œä¼˜åŒ–

4. Step4çš„æ’åºè®¡ç®—æ˜¯é‡å¤è¿›è¡Œçš„ï¼Œå®ƒçš„ç¨‹åºæ€è·¯æ˜¯ï¼Œä½ æ¯ç®—å®Œä¸€ä¸ªåˆ‡æ¯”é›ªå¤«è·ç¦»ä¹‹å’Œï¼Œå°±è¿›è¡Œä¸€æ¬¡æ’åºã€‚æˆ‘ä»¬å®Œå…¨å¯ä»¥å°†**è·ç¦»ä¹‹å’Œ**è¿™ä¸ªæ•°æ®**å­˜æ”¾åœ¨ä¸€ä¸ªæ•°ç»„**ä¸­ï¼Œå°†æ‰€æœ‰çš„è·ç¦»è®¡ç®—å®Œæ¯•åè¿›è¡Œä¸€æ¬¡æ’åºå³å¯ã€‚

5. æ’åºæœ¬èº«ä¹Ÿæœ‰å°è¯•è¿›è¡Œå¹¶è¡Œçš„ä¼˜åŒ–æ–¹å¼ã€‚

6. è™½ç„¶mallocçš„å¾ªç¯æ‰€å çš„æ—¶é—´ä¸å¤§ï¼Œä½†ä¹Ÿå¯ä»¥æ”¾åœ¨ä¸€èµ·å†™ã€‚

7. å¦‚æœè¿˜æœ‰New ideaæˆ–è€…è§‰å¾—æœ‰é”™è¯¯çš„åœ°æ–¹ï¼Œæ¬¢è¿æŒ‡æ­£åˆ†æã€‚

```c
/***Author:Matchalatter
****Time:2022/07/27****/
```

